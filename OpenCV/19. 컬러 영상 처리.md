# 컬러 영상 다루기

## RGB

opencv 컬러영상의 색상 순서는 RGB가 아닌 BGR이다.

## HSV

색상(H, 0~179(256까지만 표현이 가능하여 360도를 2로 나눔)), 채도(S, 0~255), 명도(V, 0~255)로 색을 표현한다.
## YCrCb

- Y : 밝기 또는 휘도 정보 (RGB에서 Y성분을 계산하는 공식은 그레이스케일 계산 공식과 같다.) : 0~255

- Cr, Cb : 색상 또는 색차 정보 :0~255
## 색 공간 변환

- cvtColor(src, dst, code, dstCn = 0)

    - src : 입력 영상
    - dst : 결과 영상
    - code : 색공간 변환 코드  ex)COLOR_BGR2GRAY, COLOR_BGR2HSV 등
    - dstCn : 결과 영상의 채널 수. 0이면 자동 결정

## 컬러 히스토그램 평활화

1. BGR영상으로 불러온 영상을 YCrCb로 변환

2. 변환한 YCrCb 채널을 분리

3. Y(밝기, 휘도)에 해당하는 성분만 평활화 수행

4. Y,Cr,Cb를 다시 합친다.

5. 합친 YCrCb 영상을 BGR로 변환한다.

## 색상 범위 지정

inRange(src, lowerb, upperb, dst)
- src : 입력 영상
- lowerb : 하한 값
- upperb : 상한 값
- dst : 출력 마스크 영상

이 범위에 해당하면 흰색, 아니면 검은색으로 설정된다.

## 히스토그램 역투영
inRange()함수를 이용하면 빨, 노, 초 같은 원색에 가까운 색상을 찾기에는 효과적이지만 사람 피부색같은 미세한 변화가있거나 색상 값을 수치적으로 지정하기 어려운 경우에는 적합하지 않다.

--> 히스토그램 역투영

calcBackProject()함수를 이용하여 히스토그램 역투영을 수행한다.

역투영 이해는 어렵다,,,
    
